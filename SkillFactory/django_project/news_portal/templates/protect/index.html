{% extends "main.html" %}
{% load i18n %}
{% load tz %}

{% block content %}
<h2>{% trans "Страница авторизованного пользователя" %} {{ request.user.username }}</h2>

<div>{% trans "Здесь может содержаться персональная информация для каждого пользователя" %}</div>

<!-- Форма выбора часового пояса -->
<div class="timezone-selector">
    {% get_current_timezone as TIME_ZONE %}
    <form method="post" action="">
        {% csrf_token %}
        <label for="timezone">{% trans "Выберите часовой пояс:" %}</label>
        <select name="timezone" id="timezone">
            {% for tz in timezones %}
                <option value="{{ tz }}" {% if tz == TIME_ZONE %}selected{% endif %}>
                    {{ tz }}
                </option>
            {% endfor %}
        </select>
        <button type="submit" class="btn btn-primary">
            {% trans "Применить" %}
        </button>
    </form>

    <p>{% trans "Текущее время:" %} {{ current_time|timezone:TIME_ZONE|date:"d M Y H:i:s" }}</p>
</div>

<br />

{% if is_not_author %}
<form method="post" action="{% url 'upgrade' %}">
    {% csrf_token %}
    <button type="submit" class="btn btn-secondary">
        {% trans "Стать автором" %}
    </button>
</form>
{% endif %}

<br>

<form method="post" action="{% url 'logout' %}">
    {% csrf_token %}
    <button type="submit" class="btn btn-danger">
        {% trans "Выйти" %}
    </button>
</form>

{% endblock %}